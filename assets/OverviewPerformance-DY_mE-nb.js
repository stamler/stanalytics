import{O as x,L as D}from"./LoadingAnimation-C7ic7CAA.js";import{_ as k,a as b,r as V}from"./SelectFilter.vue_vue_type_script_setup_true_lang-WljNnz7W.js";import{d as C,r as e,w as h,c as i,a as o,p as O,t as T,k as t,n as j,e as q,F as S,h as B,i as F,o as m}from"./index-CPs6ZiI9.js";import"./_commonjsHelpers-Cpj98o6Y.js";const N={class:"bg-neutral-700 p-4 text-2xl font-bold text-neutral-300"},P={class:"bg-neutral-100"},L={class:"flex w-screen flex-wrap p-2 md:w-full"},Q={key:1,class:"inline-block w-5"},E=C({__name:"OverviewPerformance",props:{objectTableProps:{type:Object,default:()=>({})},name:{type:String,required:!0},db_function:{type:null,required:!0}},setup(v){const n=v,p=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],f=e(""),y=e(""),l=e(p),s=e(p),r=e([]),u=e(!1),g=B(),d=e(!0);h([f,l,s,g,y],()=>{d.value=!0});async function w(){u.value=!0;const _=F.rpc(n.db_function,{_start_date:l.value,_end_date:s.value}),{data:a}=await _;r.value=a||[],u.value=!1,d.value=!1}return(_,a)=>(m(),i(S,null,[o("h1",N,[O(T(n.name)+" ",1),t(k,{tableData:r.value},null,8,["tableData"])]),o("div",P,[o("div",L,[o("span",{class:j([d.value?"bg-yellow-200 hover:bg-yellow-300":"","m-1 flex rounded-sm px-2 py-1"])},[u.value===!1?(m(),i("button",{key:0,class:"inline-block w-5 underline",onClick:w},[t(q(V))])):(m(),i("span",Q,[t(D)]))],2),t(b,{class:"m-1 rounded-sm px-2 py-1",modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=c=>l.value=c),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"]),t(b,{class:"m-1 rounded-sm px-2 py-1",modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=c=>s.value=c),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"])]),t(x,{class:"md:p-2",tableData:r.value,tableConfig:{columnFormatters:{market_share:"percent",value_out:"dollars",value_in:"dollars",total_out_of_type:"dollars"},omitColumns:n.objectTableProps.omitCols||[]}},null,8,["tableData","tableConfig"])])],64))}});export{E as default};
