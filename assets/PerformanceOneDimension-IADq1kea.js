import{O as C,L as S}from"./LoadingAnimation-CajDf0rP.js";import{_ as B,a as m,r as U}from"./SelectFilter.vue_vue_type_script_setup_true_lang-D3xAdHou.js";import{o,c as _,a as v,d as F,r as s,w as N,p as O,t as R,k as u,x as T,e as n,n as $,m as c,y as i,l as j,F as h,h as H,g as P,i as z,z as L}from"./index-C8eIwmOK.js";import"./_commonjsHelpers-Cpj98o6Y.js";function Q(V,a){return o(),_("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[v("path",{"fill-rule":"evenodd",d:"M15.97 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1 0 1.06l-4.5 4.5a.75.75 0 1 1-1.06-1.06l3.22-3.22H7.5a.75.75 0 0 1 0-1.5h11.69l-3.22-3.22a.75.75 0 0 1 0-1.06Zm-7.94 9a.75.75 0 0 1 0 1.06l-3.22 3.22H16.5a.75.75 0 0 1 0 1.5H4.81l3.22 3.22a.75.75 0 1 1-1.06 1.06l-4.5-4.5a.75.75 0 0 1 0-1.06l4.5-4.5a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})])}const Z={class:"bg-neutral-700 p-4 text-2xl font-bold text-neutral-300"},A={class:"bg-neutral-100"},E={class:"flex w-screen flex-wrap p-2 md:w-full"},I={key:1,class:"inline-block w-5"},W=F({__name:"PerformanceOneDimension",props:{objectTableProps:{type:Object,default:()=>({})},name:{type:String,required:!0},dbFunction:{type:null,required:!0},dimension:{type:String,required:!0},value:{type:String,required:!1},startDate:{type:String,required:!1},endDate:{type:String,required:!1}},setup(V){const a=V,g=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],l=a.value?s(a.value):s(""),r=a.startDate?s(a.startDate):s(g),d=a.endDate?s(a.endDate):s(g),y=s([]),b=s(!1),D=H(),x=P(),f=s(!0);N([l,r,d,D],()=>{f.value=!0});const k=()=>{const p=x.currentRoute.value.name,e=p==null?void 0:p.split(" By ");return`${e[1]}s By ${e[0].slice(0,-1)}`};async function w(){x.push({params:{dimension:a.dimension,value:l.value,startDate:r.value,endDate:d.value}}),b.value=!0;const p=z.rpc(a.dbFunction,{_dimension:a.dimension,_value:l.value,_start_date:r.value,_end_date:d.value}),{data:e}=await p;y.value=e||[],b.value=!1,f.value=!1}return(p,e)=>{const q=L("router-link");return o(),_(h,null,[v("h1",Z,[O(R(a.name)+" ",1),u(B,{tableData:y.value},null,8,["tableData"]),u(q,{class:"inline-block w-5",to:{name:k(),params:{startDate:n(r),endDate:n(d)}}},{default:T(()=>[u(n(Q))]),_:1},8,["to"])]),v("div",A,[v("div",E,[v("span",{class:$([f.value?"bg-yellow-200 hover:bg-yellow-300":"","m-1 flex rounded-sm px-2 py-1"])},[b.value===!1?(o(),_("button",{key:0,class:"inline-block w-5 underline",onClick:w},[u(n(U))])):(o(),_("span",I,[u(S)]))],2),a.dimension==="brand"?(o(),c(m,{key:0,class:"m-1 rounded-sm px-2 py-1",modelValue:n(l),"onUpdate:modelValue":e[0]||(e[0]=t=>i(l)?l.value=t:null),table:"sqdc_brands",name_col:"brand",value_col:"brand"},null,8,["modelValue"])):a.dimension==="sku"?(o(),c(m,{key:1,class:"m-1 rounded-sm px-2 py-1",modelValue:n(l),"onUpdate:modelValue":e[1]||(e[1]=t=>i(l)?l.value=t:null),table:"sqdc_skus",name_col:"slug",value_col:"sku"},null,8,["modelValue"])):a.dimension==="store"?(o(),c(m,{key:2,class:"m-1 rounded-sm px-2 py-1",modelValue:n(l),"onUpdate:modelValue":e[2]||(e[2]=t=>i(l)?l.value=t:null),table:"sqdc_stores_latest",orderCol:"name",name_col:"name",value_col:"number"},null,8,["modelValue"])):a.dimension==="supplier"?(o(),c(m,{key:3,class:"m-1 rounded-sm px-2 py-1",modelValue:n(l),"onUpdate:modelValue":e[3]||(e[3]=t=>i(l)?l.value=t:null),table:"sqdc_suppliers",name_col:"supplier",value_col:"supplier"},null,8,["modelValue"])):a.dimension==="type"?(o(),c(m,{key:4,class:"m-1 rounded-sm px-2 py-1",modelValue:n(l),"onUpdate:modelValue":e[4]||(e[4]=t=>i(l)?l.value=t:null),table:"sqdc_product_types",name_col:"type",value_col:"type"},null,8,["modelValue"])):j("",!0),u(m,{class:"m-1 rounded-sm px-2 py-1",modelValue:n(r),"onUpdate:modelValue":e[5]||(e[5]=t=>i(r)?r.value=t:null),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"]),u(m,{class:"m-1 rounded-sm px-2 py-1",modelValue:n(d),"onUpdate:modelValue":e[6]||(e[6]=t=>i(d)?d.value=t:null),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"])]),u(C,{class:"md:p-2",tableData:y.value,tableConfig:{columnFormatters:{market_share:"percent",value_out:"dollars",value_in:"dollars",total_out:"dollars"},omitColumns:a.objectTableProps.omitCols||[]}},null,8,["tableData","tableConfig"])])],64)}}});export{W as default};
