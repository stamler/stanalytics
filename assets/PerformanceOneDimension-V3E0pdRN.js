import{O as q,L as w}from"./LoadingAnimation-C41bCDTA.js";import{_ as C,a as u,r as S}from"./SelectFilter.vue_vue_type_script_setup_true_lang-Dic7HqAA.js";import{d as U,r as s,w as F,c as y,a as c,p as O,t as T,k as i,n as j,e as n,m as p,x as d,l as B,F as N,h as P,g as R,i as L,o}from"./index-B-4fSBt4.js";import"./_commonjsHelpers-Cpj98o6Y.js";const Q={class:"bg-neutral-700 p-4 text-2xl font-bold text-neutral-300"},$={class:"bg-neutral-100"},z={class:"flex w-screen flex-wrap p-2 md:w-full"},A={key:1,class:"inline-block w-5"},J=U({__name:"PerformanceOneDimension",props:{objectTableProps:{type:Object,default:()=>({})},name:{type:String,required:!0},dbFunction:{type:null,required:!0},dimension:{type:String,required:!0},value:{type:String,required:!1},startDate:{type:String,required:!1},endDate:{type:String,required:!1}},setup(D){const l=D,f=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],e=l.value?s(l.value):s(""),r=l.startDate?s(l.startDate):s(f),m=l.endDate?s(l.endDate):s(f),_=s([]),v=s(!1),g=P(),k=R(),b=s(!0);F([e,r,m,g],()=>{b.value=!0});async function x(){k.push({params:{dimension:l.dimension,value:e.value,startDate:r.value,endDate:m.value}}),v.value=!0;const V=L.rpc(l.dbFunction,{_dimension:l.dimension,_value:e.value,_start_date:r.value,_end_date:m.value}),{data:a}=await V;_.value=a||[],v.value=!1,b.value=!1}return(V,a)=>(o(),y(N,null,[c("h1",Q,[O(T(l.name)+" ",1),i(C,{tableData:_.value},null,8,["tableData"])]),c("div",$,[c("div",z,[c("span",{class:j([b.value?"bg-yellow-200 hover:bg-yellow-300":"","m-1 flex rounded-sm px-2 py-1"])},[v.value===!1?(o(),y("button",{key:0,class:"inline-block w-5 underline",onClick:x},[i(n(S))])):(o(),y("span",A,[i(w)]))],2),l.dimension==="brand"?(o(),p(u,{key:0,class:"m-1 rounded-sm px-2 py-1",modelValue:n(e),"onUpdate:modelValue":a[0]||(a[0]=t=>d(e)?e.value=t:null),table:"sqdc_brands",name_col:"brand",value_col:"brand"},null,8,["modelValue"])):l.dimension==="sku"?(o(),p(u,{key:1,class:"m-1 rounded-sm px-2 py-1",modelValue:n(e),"onUpdate:modelValue":a[1]||(a[1]=t=>d(e)?e.value=t:null),table:"sqdc_skus",name_col:"slug",value_col:"sku"},null,8,["modelValue"])):l.dimension==="store"?(o(),p(u,{key:2,class:"m-1 rounded-sm px-2 py-1",modelValue:n(e),"onUpdate:modelValue":a[2]||(a[2]=t=>d(e)?e.value=t:null),table:"sqdc_stores_latest",orderCol:"name",name_col:"name",value_col:"number"},null,8,["modelValue"])):l.dimension==="supplier"?(o(),p(u,{key:3,class:"m-1 rounded-sm px-2 py-1",modelValue:n(e),"onUpdate:modelValue":a[3]||(a[3]=t=>d(e)?e.value=t:null),table:"sqdc_suppliers",name_col:"supplier",value_col:"supplier"},null,8,["modelValue"])):l.dimension==="type"?(o(),p(u,{key:4,class:"m-1 rounded-sm px-2 py-1",modelValue:n(e),"onUpdate:modelValue":a[4]||(a[4]=t=>d(e)?e.value=t:null),table:"sqdc_product_types",name_col:"type",value_col:"type"},null,8,["modelValue"])):B("",!0),i(u,{class:"m-1 rounded-sm px-2 py-1",modelValue:n(r),"onUpdate:modelValue":a[5]||(a[5]=t=>d(r)?r.value=t:null),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"]),i(u,{class:"m-1 rounded-sm px-2 py-1",modelValue:n(m),"onUpdate:modelValue":a[6]||(a[6]=t=>d(m)?m.value=t:null),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"])]),i(q,{class:"md:p-2",tableData:_.value,tableConfig:{columnFormatters:{market_share:"percent",value_out:"dollars",value_in:"dollars",total_out:"dollars"},omitColumns:l.objectTableProps.omitCols||[]}},null,8,["tableData","tableConfig"])])],64))}});export{J as default};
