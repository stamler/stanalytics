import{o as t,c as n,a as f,_ as N,C as x,d as y,D as W,u as C,s as $,r as d,B as V,m as M,j as F,i as p,b as P,E as q,F as h,x as L,k as m,e as k,l as j,t as A,n as D}from"./index-BAAfU4mb.js";function E(e,s){return t(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z","clip-rule":"evenodd"})])}function T(e,s){return t(),n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[f("path",{"fill-rule":"evenodd",d:"M6.32 2.577a49.255 49.255 0 0 1 11.36 0c1.497.174 2.57 1.46 2.57 2.93V21a.75.75 0 0 1-1.085.67L12 18.089l-7.165 3.583A.75.75 0 0 1 3.75 21V5.507c0-1.47 1.073-2.756 2.57-2.93Z","clip-rule":"evenodd"})])}const R={},Z={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},z=x('<rect width="7.33" height="7.33" x="1" y="1" fill="currentColor"><animate id="svgSpinnersBlocksWave0" attributeName="x" begin="0;svgSpinnersBlocksWave1.end+0.2s" dur="0.6s" values="1;4;1"></animate><animate attributeName="y" begin="0;svgSpinnersBlocksWave1.end+0.2s" dur="0.6s" values="1;4;1"></animate><animate attributeName="width" begin="0;svgSpinnersBlocksWave1.end+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="0;svgSpinnersBlocksWave1.end+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="8.33" y="1" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="8.33;11.33;8.33"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="1;4;1"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="1" y="8.33" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="1;4;1"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="8.33;11.33;8.33"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="15.66" y="1" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="15.66;18.66;15.66"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="1;4;1"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="8.33" y="8.33" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="8.33;11.33;8.33"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="8.33;11.33;8.33"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="1" y="15.66" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="1;4;1"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="15.66;18.66;15.66"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="15.66" y="8.33" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="15.66;18.66;15.66"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="8.33;11.33;8.33"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="8.33" y="15.66" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="8.33;11.33;8.33"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="15.66;18.66;15.66"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="15.66" y="15.66" fill="currentColor"><animate id="svgSpinnersBlocksWave1" attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.4s" dur="0.6s" values="15.66;18.66;15.66"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.4s" dur="0.6s" values="15.66;18.66;15.66"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.4s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.4s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect>',9),G=[z];function H(e,s){return t(),n("svg",Z,G)}const _=N(R,[["render",H]]),K={key:0},O=["value"],U=["title"],I={key:1,class:"inline-block w-5"},Y=y({__name:"SelectFilter",props:W({table:{type:String,required:!0},order_col:{type:String||null,default:null},ascending:{type:Boolean,default:!1},name_col:{type:String,required:!0},value_col:{type:String,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const s=C(),{preferences:c}=$(s),a=e,u=d(!1),v=d(!1),l=V(e,"modelValue"),g=d([]),b=r=>{switch(r){case"supplier":return"defaultSupplier";case"number":return"defaultStore";case"brand":return"defaultBrand";case"type":return"defaultType";default:return"defaultSku"}},B=M(()=>l.value!==c.value[b(a.value_col)]&&["supplier","number","brand","type","sku"].includes(a.value_col)),w=async()=>{var i;console.log(`Saving preference for ${a.value_col} with value ${l.value}`),v.value=!0;const r=c.value;r[b(a.value_col)]=l.value;const{error:o}=await p.from("profiles").update({preferences:r}).eq("id",(i=s.user)==null?void 0:i.id);o&&alert(`Error saving preference: ${o.message}`),s.loadPreferences(),v.value=!1};return F(async()=>{var i;u.value=!0;let r=p.from(a.table).select();a.order_col&&(r=r.order(a.order_col,{ascending:a.ascending}));const{data:o}=await r;g.value=o||void 0,l.value=l.value||((i=g.value)==null?void 0:i[0][a.value_col]),u.value=!1}),(r,o)=>(t(),n(h,null,[u.value?(t(),n("span",K,"Loading...")):P((t(),n("select",{key:1,class:"rounded-sm px-2 py-1","onUpdate:modelValue":o[0]||(o[0]=i=>l.value=i)},[(t(!0),n(h,null,L(g.value,i=>(t(),n("option",{key:i[a.value_col]||void 0,value:i[a.value_col]},A(i[a.name_col]),9,O))),128))],512)),[[q,l.value]]),B.value?(t(),n("span",{key:2,title:`Set ${l.value} as your default ${a.value_col}`,class:"flex flex-col justify-center rounded-sm bg-green-200 px-2 py-1 hover:bg-green-300"},[v.value===!1?(t(),n("button",{key:0,class:"inline-block w-5 underline",onClick:w},[m(k(T))])):(t(),n("span",I,[m(_)]))],8,U)):j("",!0)],64))}}),S=function(e,s){const c=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}],a=new RegExp("\\.0+$|(?<=\\.[0-9]*[1-9])0+$"),u=c.slice().reverse().find(v=>e>=v.value);return u?(e/u.value).toFixed(s).replace(a,"").concat(u.symbol):"0"},ee=function(e){return typeof e!="number"?e:"$"+S(e,1)},ae=function(e){return typeof e!="number"?e:e.toFixed(2)+"%"},te=function(e){return typeof e!="number"?e:S(e,1)},J={key:0,class:"inline-block w-5 underline"},Q={key:1,class:"inline-block w-5"},ne=y({__name:"RefreshButton",props:{loading:{type:Boolean},dirty:{type:Boolean}},setup(e){return(s,c)=>(t(),n("span",{title:"Refresh the data",class:D([s.dirty?"bg-yellow-200 hover:bg-yellow-300":"","flex flex-col justify-center rounded-sm px-2 py-1"])},[s.loading===!1?(t(),n("button",J,[m(k(E))])):(t(),n("span",Q,[m(_)]))],2))}});export{_ as L,ne as _,te as a,ae as b,Y as c,ee as f};
