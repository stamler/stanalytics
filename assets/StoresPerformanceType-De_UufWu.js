import{_ as c,O as x,r as V,L as k}from"./SelectFilter.vue_vue_type_script_setup_true_lang-8sdsFfTT.js";import{d as D,r as a,w as C,c as m,a as u,t as T,n as S,k as t,e as h,F as j,h as q,i as O,o as p}from"./index-nGNKtJAK.js";import"./_commonjsHelpers-Cpj98o6Y.js";const B={class:"bg-neutral-700 p-4 text-2xl font-bold text-neutral-300"},F={class:"bg-neutral-100"},N={class:"flex w-screen flex-wrap p-2 md:w-full"},P={key:1,class:"inline-block w-5"},Q=D({__name:"StoresPerformanceType",props:{objectTableProps:{type:Object,default:()=>({})},name:{type:String,required:!0}},setup(f){const i=f,_=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],b=a(""),s=a(""),o=a(_),n=a(_),v=a([]),r=a(!1),g=q(),d=a(!0);C([b,o,n,g,s],()=>{d.value=!0});async function w(){r.value=!0;const y=O.rpc("stores_performance_single_type",{_type:s.value,_start_date:o.value,_end_date:n.value}),{data:e}=await y;v.value=e||[],r.value=!1,d.value=!1}return(y,e)=>(p(),m(j,null,[u("h1",B,T(i.name),1),u("div",F,[u("div",N,[u("span",{class:S([d.value?"bg-yellow-200 hover:bg-yellow-300":"","m-1 flex rounded-sm px-2 py-1"])},[r.value===!1?(p(),m("button",{key:0,class:"inline-block w-5 underline",onClick:w},[t(h(V))])):(p(),m("span",P,[t(k)]))],2),t(c,{class:"m-1 rounded-sm px-2 py-1",modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=l=>s.value=l),table:"sqdc_product_types",name_col:"type",value_col:"type",defaultName:"All Types",defaultValue:null},null,8,["modelValue"]),t(c,{class:"m-1 rounded-sm px-2 py-1",modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value=l),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"]),t(c,{class:"m-1 rounded-sm px-2 py-1",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=l=>n.value=l),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"])]),t(x,{class:"md:p-2",tableData:v.value,tableConfig:{columnFormatters:{market_share:"percent",value_out:"dollars",value_in:"dollars",total_out_of_type:"dollars"},omitColumns:i.objectTableProps.omitCols||[]}},null,8,["tableData","tableConfig"])])],64))}});export{Q as default};
