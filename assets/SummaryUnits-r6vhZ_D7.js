import{_ as v,a as _,O as y}from"./SelectFilter.vue_vue_type_script_setup_true_lang-BTeayt85.js";import{d as g,r as o,w as b,k as D,i as r,c as w,a as p,l as h,t as q,m as n,F as V,o as x}from"./index-CBF_wxn5.js";import"./_commonjsHelpers-Cpj98o6Y.js";const S={class:"bg-yellow-400 p-4 text-2xl font-bold"},U={class:"bg-green-100 p-2"},O=g({__name:"SummaryUnits",setup(k){const l=o(""),s=o(""),u=o([]),c=o(0),i=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0];async function f(){let a=0,e=[];for(;;){const{data:t,error:m}=await r.from("sqdc_inventory_changes").select().gte("date",i).range(a,a+999);if(m){console.error(m);return}if(t){if(e=e.concat(t),t.length<1e3)break;a+=1e3}}return{data:e}}async function d(){if(l.value===""||s.value==="")return;const a=r.from("sqdc_inventory_changes_allstores").select().eq("supplier",l.value).eq("date",s.value),{data:e}=await a;u.value=e||[]}return b([l,s],()=>{d()}),D(async()=>{const{count:a,error:e}=await r.from("sqdc_inventory_changes_allstores").select("*",{count:"exact",head:!0}).gte("date",i);e&&console.error(e),a&&(c.value=a),d()}),(a,e)=>(x(),w(V,null,[p("h1",S,[h(" Summary Units ("+q(c.value)+" items) ",1),n(v,{query:f(),dlFileName:"Summary Units.csv"},null,8,["query"])]),p("div",U,[n(_,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value=t),table:"sqdc_suppliers",name_col:"supplier",value_col:"supplier"},null,8,["modelValue"]),n(_,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value=t),table:"sqdc_inventory_changes_dates",name_col:"date",value_col:"date"},null,8,["modelValue"]),n(y,{tableData:u.value},null,8,["tableData"])])],64))}});export{O as default};
