import{_ as g,O as B}from"./SelectFilter.vue_vue_type_script_setup_true_lang-B2YU4hxa.js";import{_ as f}from"./DownloadData.vue_vue_type_script_setup_true_lang-BXSweP4a.js";import{d as W,r as i,c as v,a as l,j as y,t as w,k as s,e as x,F as C,i as h,o as b,q as D}from"./index-410hekcC.js";import{r as V}from"./ArrowPathIcon-CmFzk2hu.js";import"./_commonjsHelpers-Cpj98o6Y.js";const q={class:"bg-neutral-700 p-4 text-2xl font-bold text-neutral-300"},j={class:"bg-neutral-100 p-2"},A={class:"flex"},O={class:"flex"},T={key:1,class:"inline-block w-5"},F=D('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><rect width="7.33" height="7.33" x="1" y="1" fill="currentColor"><animate id="svgSpinnersBlocksWave0" attributeName="x" begin="0;svgSpinnersBlocksWave1.end+0.2s" dur="0.6s" values="1;4;1"></animate><animate attributeName="y" begin="0;svgSpinnersBlocksWave1.end+0.2s" dur="0.6s" values="1;4;1"></animate><animate attributeName="width" begin="0;svgSpinnersBlocksWave1.end+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="0;svgSpinnersBlocksWave1.end+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="8.33" y="1" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="8.33;11.33;8.33"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="1;4;1"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="1" y="8.33" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="1;4;1"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="8.33;11.33;8.33"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.1s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="15.66" y="1" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="15.66;18.66;15.66"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="1;4;1"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="8.33" y="8.33" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="8.33;11.33;8.33"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="8.33;11.33;8.33"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="1" y="15.66" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="1;4;1"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="15.66;18.66;15.66"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.2s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="15.66" y="8.33" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="15.66;18.66;15.66"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="8.33;11.33;8.33"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="8.33" y="15.66" fill="currentColor"><animate attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="8.33;11.33;8.33"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="15.66;18.66;15.66"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.3s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect><rect width="7.33" height="7.33" x="15.66" y="15.66" fill="currentColor"><animate id="svgSpinnersBlocksWave1" attributeName="x" begin="svgSpinnersBlocksWave0.begin+0.4s" dur="0.6s" values="15.66;18.66;15.66"></animate><animate attributeName="y" begin="svgSpinnersBlocksWave0.begin+0.4s" dur="0.6s" values="15.66;18.66;15.66"></animate><animate attributeName="width" begin="svgSpinnersBlocksWave0.begin+0.4s" dur="0.6s" values="7.33;1.33;7.33"></animate><animate attributeName="height" begin="svgSpinnersBlocksWave0.begin+0.4s" dur="0.6s" values="7.33;1.33;7.33"></animate></rect></svg>',1),U=[F],R=W({__name:"UniversalReport",props:{rpcArgs:{type:Object,required:!0},name:{type:String,required:!0},objectTableProps:{type:Object,default:()=>({})}},setup(k){const n=k,S=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],c=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],u=i("All Suppliers"),o=i(c),r=i(c),d=i([]),m=i(!1);async function _(){let t=0,e=[];for(;;){const{data:a,error:p}=await h.rpc("get_movements",{...n.rpcArgs,_start_date:S,_end_date:r.value}).range(t,t+999);if(p){console.error(p);return}if(a){if(e=e.concat(a),a.length<1e3)break;t+=1e3}}return{data:e}}async function N(){m.value=!0;const t=h.rpc("get_movements",{...n.rpcArgs,_supplier:u.value,_start_date:o.value,_end_date:r.value}),{data:e}=await t;d.value=e||[],m.value=!1}return(t,e)=>(b(),v(C,null,[l("h1",q,[y(w(n.name)+" ",1),s(f,{query:_(),dlFileName:`${n.name}.csv`},null,8,["query","dlFileName"])]),l("div",j,[l("div",A,[s(g,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),table:"sqdc_suppliers",name_col:"supplier",value_col:"supplier",defaultName:"All Suppliers",defaultValue:null},null,8,["modelValue"]),s(g,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"]),s(g,{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value=a),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"]),l("span",O,[m.value===!1?(b(),v("button",{key:0,class:"inline-block w-5 underline hover:text-gray-400",onClick:N},[s(x(V))])):(b(),v("span",T,U))])]),s(B,{tableData:d.value,tableConfig:{columnFormatters:{value:"dollars",price:"dollars"},omitColumns:n.objectTableProps.omitCols||[]}},null,8,["tableData","tableConfig"])])],64))}});export{R as default};
