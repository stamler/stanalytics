import{_ as k,O as C}from"./SizeWarning.vue_vue_type_script_setup_true_lang-it9d85Nk.js";import{_ as i,r as S,L as q}from"./shared-CchWXECW.js";import{d as T,u as h,s as j,r as a,w as y,c as m,a as r,q as A,t as O,k as l,n as U,e as B,F,h as N,i as R,o as v}from"./index-BbjobM8G.js";import"./_commonjsHelpers-Cpj98o6Y.js";const L={class:"bg-neutral-700 p-4 text-2xl font-bold text-neutral-300"},P={class:"bg-neutral-100"},Q={class:"flex w-screen flex-wrap p-2 md:w-full"},$={key:1,class:"inline-block w-5"},H=T({__name:"UniversalReport",props:{rpcArgs:{type:Object,required:!1},name:{type:String,required:!0},objectTableProps:{type:Object,default:()=>({})}},setup(g){const x=h(),{preferences:_}=j(x),u=g,t=a("All Suppliers"),b=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],o=a(b),n=a(b),w=a(""),d=a([]),c=a(!1),V=N(),p=a(!0);y([t,w,o,n,V],()=>{p.value=!0}),y(_,()=>{t.value=_.value.defaultSupplier||""},{immediate:!0});async function D(){c.value=!0;const f=R.rpc("get_movements",{...u.rpcArgs,_supplier:t.value,_start_date:o.value,_end_date:n.value}),{data:e}=await f;d.value=e||[],c.value=!1,p.value=!1}return(f,e)=>(v(),m(F,null,[r("h1",L,[A(O(u.name)+" ",1),l(k,{tableData:d.value},null,8,["tableData"])]),r("div",P,[r("div",Q,[r("span",{class:U([p.value?"bg-yellow-200 hover:bg-yellow-300":"","m-1 flex rounded-sm px-2 py-1"])},[c.value===!1?(v(),m("button",{key:0,class:"inline-block w-5 underline",onClick:D},[l(B(S))])):(v(),m("span",$,[l(q)]))],2),l(i,{class:"m-1 rounded-sm px-2 py-1",modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=s=>t.value=s),table:"sqdc_suppliers",name_col:"supplier",value_col:"supplier"},null,8,["modelValue"]),l(i,{class:"m-1 rounded-sm px-2 py-1",modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"]),l(i,{class:"m-1 rounded-sm px-2 py-1",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=s=>n.value=s),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"])]),l(C,{class:"md:p-2",tableData:d.value,tableConfig:{columnFormatters:{value:"dollars",price:"dollars"},omitColumns:u.objectTableProps.omitCols||[]}},null,8,["tableData","tableConfig"])])],64))}});export{H as default};
