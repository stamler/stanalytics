import{_ as f,O as D,r as j,L as q}from"./SelectFilter.vue_vue_type_script_setup_true_lang-B9Hb-Gvw.js";import{o as r,c as u,a as l,d as w,q as O,n as y,r as t,w as S,k as a,j as $,t as M,e as x,x as T,F as U,h as A,i as B}from"./index-DOqny7ut.js";import"./_commonjsHelpers-Cpj98o6Y.js";function L(i,s){return r(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}const N={class:"m-2 mx-auto w-full p-4 text-white md:m-auto md:w-1/2"},R=l("h2",{class:"text-xl"},"Large Result Set",-1),F=l("p",null," This query has a result set with over 1000 records. Only the first 1000 records are shown. You can see a complete result set by downloading the report related to this data. ",-1),Z=w({__name:"LargeResultsModal",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(i){const s=O(i,"modelValue");return(d,o)=>(r(),u("div",{class:y([s.value?"fixed left-0 top-0":"hidden","justify-content inset-x-0 flex h-screen w-screen flex-1 flex-col bg-black bg-opacity-90"])},[l("div",N,[R,F,l("button",{class:"mt-3 rounded bg-blue-500 px-4 py-2 font-bold text-white hover:bg-blue-700",onClick:o[0]||(o[0]=p=>s.value=!1)}," OK ")])],2))}}),P={class:"bg-neutral-700 p-4 text-2xl font-bold text-neutral-300"},Q={class:"bg-neutral-100"},z={class:"flex w-screen flex-wrap p-2 md:w-full"},E={key:1,class:"inline-block w-5"},G=w({__name:"UniversalReport",props:{rpcArgs:{type:Object,required:!1},name:{type:String,required:!0},objectTableProps:{type:Object,default:()=>({})}},setup(i){const s=i,d=t(!1),o=t("All Suppliers"),p=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],c=t(p),m=t(p),h=t(""),v=t([]),b=t(!1),V=A(),_=t(!0);S([o,h,c,m,V],()=>{_.value=!0});async function k(){b.value=!0;const g=B.rpc("get_movements",{...s.rpcArgs,_supplier:o.value,_start_date:c.value,_end_date:m.value}),{data:e}=await g;v.value=e||[],b.value=!1,_.value=!1}const C=()=>{d.value=!d.value};return(g,e)=>(r(),u(U,null,[a(Z,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=n=>d.value=n)},null,8,["modelValue"]),l("h1",P,[$(M(s.name)+" ",1),v.value.length>=1e3?(r(),u("span",{key:0,class:"inline-block",onClick:C},[a(x(L),{class:"h-6 w-6 rounded-full bg-white text-red-700"})])):T("",!0)]),l("div",Q,[l("div",z,[l("span",{class:y([_.value?"bg-yellow-200 hover:bg-yellow-300":"","m-1 flex rounded-sm px-2 py-1"])},[b.value===!1?(r(),u("button",{key:0,class:"inline-block w-5 underline",onClick:k},[a(x(j))])):(r(),u("span",E,[a(q)]))],2),a(f,{class:"m-1 rounded-sm px-2 py-1",modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=n=>o.value=n),table:"sqdc_suppliers",name_col:"supplier",value_col:"supplier"},null,8,["modelValue"]),a(f,{class:"m-1 rounded-sm px-2 py-1",modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=n=>c.value=n),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"]),a(f,{class:"m-1 rounded-sm px-2 py-1",modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=n=>m.value=n),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"])]),a(D,{class:"md:p-2",tableData:v.value,tableConfig:{columnFormatters:{value:"dollars",price:"dollars"},omitColumns:s.objectTableProps.omitCols||[]}},null,8,["tableData","tableConfig"])])],64))}});export{G as default};
