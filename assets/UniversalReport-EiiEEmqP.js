import{_ as w,O as x}from"./SizeWarning.vue_vue_type_script_setup_true_lang-3JY7Zej9.js";import{d as S,u as q,s as C,r as a,w as f,c as T,a as i,q as j,t as O,k as t,F as k,h as A,i as U,o as h}from"./index-BAAfU4mb.js";import{_ as B,c as p}from"./RefreshButton.vue_vue_type_script_setup_true_lang-BZ1PaPHp.js";import"./_commonjsHelpers-Cpj98o6Y.js";const F={class:"bg-neutral-700 p-4 text-2xl font-bold text-neutral-300"},N={class:"bg-neutral-100"},R={class:"flex w-screen flex-wrap gap-1 p-2 md:w-full"},I=S({__name:"UniversalReport",props:{rpcArgs:{type:Object,required:!1},name:{type:String,required:!0},objectTableProps:{type:Object,default:()=>({})}},setup(b){const g=q(),{preferences:m}=C(g),u=b,l=a("All Suppliers"),_=new Date(Date.now()-24*60*60*1e3).toISOString().split("T")[0],o=a(_),n=a(_),y=a(""),r=a([]),d=a(!1),V=A(),c=a(!0);f([l,y,o,n,V],()=>{c.value=!0}),f(m,()=>{l.value=m.value.defaultSupplier||""},{immediate:!0});async function D(){d.value=!0;const v=U.rpc("get_movements",{...u.rpcArgs,_supplier:l.value,_start_date:o.value,_end_date:n.value}),{data:e}=await v;r.value=e||[],d.value=!1,c.value=!1}return(v,e)=>(h(),T(k,null,[i("h1",F,[j(O(u.name)+" ",1),t(w,{tableData:r.value},null,8,["tableData"])]),i("div",N,[i("div",R,[t(B,{onClick:D,loading:d.value,dirty:c.value},null,8,["loading","dirty"]),t(p,{modelValue:l.value,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value=s),table:"sqdc_suppliers",name_col:"supplier",value_col:"supplier"},null,8,["modelValue"]),t(p,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),ascending:!0,order_col:"date",table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"]),t(p,{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=s=>n.value=s),table:"sqdc_inventory_movements_dates",name_col:"date",value_col:"date"},null,8,["modelValue"])]),t(x,{class:"md:p-2",tableData:r.value,tableConfig:{columnFormatters:{value:"dollars",price:"dollars"},omitColumns:u.objectTableProps.omitCols||[]}},null,8,["tableData","tableConfig"])])],64))}});export{I as default};
